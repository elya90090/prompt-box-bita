<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>جعبه پرامپت بیتا - Prompt Box Bita</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
body { 
  font-family: Arial, sans-serif; 
  background:#f4f4f4; 
  display: flex; 
  flex-direction: column; 
  min-height: 100vh;
}
header { 
  background: linear-gradient(90deg,#4A90E2,#50E3C2,#F5A623); 
  color:white; padding:1rem; 
  display:flex; justify-content:space-between; align-items:center; 
}
header .logo { max-height:50px; margin-left:1rem; }
.table-responsive { direction: rtl; margin-top:1rem; }
footer { 
  background:#4A90E2; color:white; text-align:center; 
  padding:1rem; margin-top:auto; /* فاصله پایین بیشتر */ 
}
.table { background: white; border-radius: 8px; overflow: hidden; }
</style>
</head>
<body>

<header>
  <div class="d-flex align-items-center">
    <img src="logo.png" alt="لوگو" class="logo">
    <div>
      <h1 class="h4 mb-0">جعبه پرامپت بیتا</h1>
      <small>Prompt Box Bita</small>
    </div>
  </div>
  <div>v1.0.0</div>
</header>

<div class="container mt-3 mb-5">
  <div class="d-flex mb-2 justify-content-between flex-wrap">
    <select id="categoryFilter" class="form-select w-auto mb-2" onchange="filterTable()">
      <option value="">همه دسته‌ها</option>
      <option value="دسته1">دسته1</option>
      <option value="دسته2">دسته2</option>
      <option value="دسته3">دسته3</option>
    </select>

    <input type="text" id="searchInput" class="form-control w-auto mb-2" placeholder="جستجو..." onkeyup="filterTable()">
  </div>

  <div class="table-responsive">
    <table class="table table-striped table-bordered">
      <thead class="table-primary">
        <tr>
          <th>ردیف</th>
          <th>نام پرامپت</th>
          <th>متن پرامپت</th>
          <th>منبع</th>
        </tr>
      </thead>
      <tbody id="promptTable"></tbody>
    </table>
  </div>
</div>

<footer>
  © 2025 جعبه پرامپت بیتا - Prompt Box Bita | تمام حقوق محفوظ است
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.10.0/dist/supabase.min.js"></script>

<script>
// جایگزین با مقادیر Supabase خودت
const supabaseUrl = 'https://YOUR_PROJECT_ID.supabase.co';
const supabaseKey = 'YOUR_ANON_KEY';
const supabase = supabase.createClient(supabaseUrl, supabaseKey);

let allPrompts = [];

async function loadPrompts() {
  const { data, error } = await supabase.from('prompts').select('*').order('id');
  if(error){ console.error(error); return; }
  allPrompts = data;
  displayPrompts(data);
}

function displayPrompts(data){
  const tbody = document.getElementById('promptTable');
  tbody.innerHTML = '';
  data.forEach((row,index)=>{
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${index+1}</td>
      <td>${row.name}</td>
      <td>${row.text}</td>
      <td>${row.source}</td>
    `;
    tbody.appendChild(tr);
  });
}

function filterTable(){
  const category = document.getElementById('categoryFilter').value;
  const search = document.getElementById('searchInput').value.toLowerCase();
  const filtered = allPrompts.filter(row=>{
    const matchCategory = category === "" || row.category === category;
    const matchSearch = row.name.toLowerCase().includes(search) || row.text.toLowerCase().includes(search);
    return matchCategory && matchSearch;
  });
  displayPrompts(filtered);
}

loadPrompts();
</script>

</body>
</html>
